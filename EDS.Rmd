---
title: "EDS-Cancer-EQI"
author: "Uma Bhat"
date: "2024-03-25"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidycensus)
```

Cancer instance data was obtained from NCDHHS in PDF form and was converted to .csv format using Tabula.

```{r data}
eqi_2018 <- read_csv("/Users/umabhat/Documents/UNC 2023-2024/STOR 320/Exploratory Data Analysis/Eqidata_all_domains_non-transformed_2013JULY18 (1).csv", show_col_types = FALSE)
cancer_2018 <- read_csv("/Users/umabhat/Documents/UNC 2023-2024/STOR 320/EDA/instance-data.csv", show_col_types = FALSE)
```

```{r nc-specific}
eqi_2018 <- eqi_2018 %>% 
  filter(STATE == "NC")

View(eqi_2018)
```

For purposes of this study, we will limit the variables we address from the EQI dataset to:

`pct_unemp` - percent unemployed

`med_hh_inc` - median household income 

`A_PCBs` - Polychlorinated biphenyls in air (carcinogenic)

`W_PCB` - Polychlorinated biphenyls in water (carcinogenic)

These variables are specific to just a few key social determinants of health and known carcinogens. 

A [description of the variables](https://schs.dph.ncdhhs.gov/schs/CCR/incidence18/2018-CancerIncidenceandMortalityinNorthCarolinaReport-Final-WEB-v2.pdf) we use from the instance dataset is here:

`county` - 

`cases` - 

`case-rate` - Rates are used to show the risk of an event occurring in a population and the CCR presents rates per 100,000 persons. The CCR calculates rates for both incidence and mortality data. A crude rate is found by dividing the number of events (e.g., cancer cases or deaths) for a population of interest in a specified time period by the population of interest at risk during the same time period. This ratio is then multiplied by 100,000 to express it as a rate per 100,000 persons.

`deaths` - 

`death-rate` - Rates are used to show the risk of an event occurring in a population and the CCR presents rates per 100,000 persons. The CCR calculates rates for both incidence and mortality data. A crude rate is found by dividing the number of events (e.g., cancer cases or deaths) for a population of interest in a specified time period by the population of interest at risk during the same time period. This ratio is then multiplied by 100,000 to express it as a rate per 100,000 persons.

```{r cleaning}
eqi_2018 <- eqi_2018 %>%
  select(
    `pct_unemp`,
    `med_hh_inc`,
    `A_PCBs`,
    `W_PCB`
  )

cancer_2018 <- cancer_2018 %>% 
  rename(
    case_rate = Rate...3,
    death_rate = Rate...5,
    cases = Cases,
    deaths = Deaths,
    county = ...1
  )
```

Which counties saw the highest cancer instance rates in 2018? 

```{r county-rates}
cancer_2018 %>%
  arrange(desc(case_rate))
```

Which counties had the poorest EQI levels for our selected variables?

```{r county-eqi-levels}

```

*To expand this study, we'd try to find the association between EQI levels over time with cancer instance rates over time.*

Has the number of instances of cancer increased in certain counties' populations over time? (Plot)

```{r cancer-over-time}

```

Have certain kinds of cancers been more prevalent in the past five years? 

```{r cancer-types-over-time}

```

*Predicting instance rates* 

How closely linked are EQI levels and cancer instance rates? Based on EQI levels, could you predict what the cancer instance rate will be in a county?

```{r eqi-cancer}

```

Are certain types of cancers (e.x. colorectal, breast) predictable based on EQI levels?

```{r types-prediction}

```


